<!doctype html>

<!--[if IEMobile 7]><html class="no-js iem7 oldie"><![endif]-->
<!--[if lt IE 7]><html class="no-js ie6 oldie" lang="en"><![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js ie7 oldie" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js ie8 oldie" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)]><!--><html class="no-js" lang="en"><!--<![endif]-->

<head>
<meta charset="utf-8">

<title>Punch - User Guide</title>
<meta name="description" content="Punch is a simple tool to generate HTML documents from Mustache templates and content stored in JSON &amp; Markdown format.">
<meta name="author" content="Lakshan Perera (http://laktek.com)">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="css/style.css">

<!-- For progressively larger displays -->
<link rel="stylesheet" media="only screen and (min-width: 480px)" href="css/480.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 768px)" href="css/768.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 992px)" href="css/992.css?v=1">
<link rel="stylesheet" media="only screen and (min-width: 1382px)" href="css/1382.css?v=1">

<!--[if (lt IE 9) & (!IEMobile)]>
<script src="js/libs/selectivizr-min.js"></script>
<![endif]-->

<!-- Fonts -->
<link href='http://fonts.googleapis.com/css?family=Patua+One' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>

<link rel="shortcut icon" href="/favicon.ico">

<!--iOS. Delete if not required -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!--Microsoft. Delete if not required -->
<meta http-equiv="cleartype" content="on">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<!--[if lt IE 7 ]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script><script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script><![endif]-->

<!-- http://t.co/y1jPVnT -->
<link rel="canonical" href="/">
</head>

<body class="clearfix">

<header class="page" role="banner">
  <h1><a href="http://laktek.github.com/punch">Punch</a></h1>
</header>

<div class="content clearfix">
  <h2>User Guide</h2>
  <div><p>Here&#39;s a step by step guide on how to create a simple HTML site using Punch.

</p>
<ul>
<li><p>First of all we should create a new directory for our site. (<code>mkdir awesome_site</code>)</p>
</li>
<li><p>Then, go inside the directory (<code>cd awesome_site</code>) and run the command <code>punch setup</code>.</p>
</li>
<li><p>This will create two directories to hold <code>templates</code> and <code>contents</code>. Also, it will add a <code>config.json</code> file which contains the default configuration for Punch.</p>
</li>
<li><p>Say we want to have a page called <code>about.html</code>, to give an overview of the company and details of the team members.</p>
</li>
<li><p>First we must create a corresponding template for the page inside <code>templates</code> directory.</p>
</li>
<li><p>Here&#39;s how our <code>about.mustache</code> template will look like.</p>
<pre><code>&lt;!doctype html&gt;

&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;&gt;

&lt;title&gt;{{title}}&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;

  &lt;h1&gt;{{title}}&lt;/h1&gt;

 &lt;p&gt;{{{overview}}}&lt;/p&gt; 

  &lt;ul&gt;
    {{#team}}
      &lt;li&gt;&lt;strong&gt;{{name}}&lt;/strong&gt; - {{bio}}&lt;/li&gt;
    {{/team}}
  &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</li>
<li><p>Now inside <code>contents</code> directory let&#39;s create a file called <code>about.json</code> to hold the corresponding content.</p>
</li>
<li><p>We&#39;ll add the following content in <code>about.json</code>.</p>
<pre><code>{
  &quot;title&quot;: &quot;About Us&quot;,
  &quot;team&quot;: [
    {
      &quot;name&quot;: &quot;Pointy-Haired Boss&quot;,
      &quot;bio&quot;: &quot;Incompetent Manager&quot;
    },

    {
      &quot;name&quot;: &quot;Wally&quot;,
      &quot;bio&quot;: &quot;Senior Engineer&quot;
    },

    {
      &quot;name&quot;: &quot;Dilbert&quot;,
      &quot;bio&quot;: &quot;Engineer&quot;
    }
  ]
}</code></pre>
</li>
<li><p>We also have a lengthy company overview written in markdwon format. Instead of adding it to the <code>about.json</code> file, we&#39;ll be keeping it seperately. For that we create a new directory named <code>about</code> inside the <code>contents</code> directory and save the markdown file there as <code>overview.markdown</code>.</p>
</li>
<li><p>To generate and view the site, go back to the top-most directory (<code>cd ../</code>) and run the command <code>punch server</code>.</p>
</li>
<li><p>This will start the Punch dev server on port <code>9009</code> and store the generated pages in a directory named <code>public</code>.</p>
</li>
<li><p>Finally, point your browser to <code>http://localhost:9009/about.html</code> to see the generated about page.</p>
</li>
</ul>
<h3>Additional Features</h3>
<h4>Partial Templates</h4>
<p>You can specify reusable partial templates with Punch. Partial templates should be named with a leading underscore character (eg. <code>_sidebar.mustache</code>). To render a partial in another template, do this:  

</p>
<pre><code>{{&gt; sidebar }}</code></pre>
<h4>Shared Content</h4>
<p>If you create a JSON file with the name <code>shared.json</code> or a directory named <code>shared</code> under <code>contents</code> its content will be automatically available for all templates in your site.

</p>
<h4>Client-side Rendering</h4>
<p>It&#39;s possible to use the Punch&#39;s renderer in the browser as well. All you need to do is include the latest <a href="https://github.com/janl/mustache.js/"><code>mustache.js</code></a> and the <a href="https://github.com/laktek/Punch/tree/master/lib/renderers">Punch&#39;s renderer</a> in your client-side script.

</p>
<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;assets/mustache.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;node_modules/punch/lib/renderers/mustache.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>Here&#39;s how you can use it in the browser:

</p>
<pre><code>var renderer = new MustacheRenderer();

renderer.afterRender = function(output){
  document.getElementById(&quot;client_block&quot;).innerHTML = output;
};

renderer.setTemplate(&#39;&lt;p&gt;{{content}}&lt;/p&gt;&#39;);
renderer.setContent({&quot;content&quot;: &quot;test&quot;});
renderer.setPartials({});</code></pre>
<p>Since Punch&#39;s renderer is asynchronous, you can call <code>setTemplate</code>, <code>setContent</code> and <code>setPartials</code> once you have the data (eg. after loading via AJAX). Rendering will happen when the renderer receives all 3 method calls.

</p>
<h4>Configuration Options</h4>
<pre><code>{
  &quot;template_dir&quot;: &quot;templates&quot;,      // directory to look for templates
  &quot;content_dir&quot;: &quot;contents&quot;,        // directory to look for contents
  &quot;output_dir&quot;: &quot;public&quot;,           // directory to save the generated output
  &quot;output_extension&quot;: &quot;html&quot;,       // default extension to use for output files
  &quot;shared_content&quot;: &quot;shared&quot;,       // name of the file/directory of shared content inside `contents`

  // register new renderers or parsers (paths should be valid node.js require paths)

  &quot;renderers&quot;: {
    &quot;mustache&quot;: &quot;./renderers/mustache&quot; 
  },
  &quot;parsers&quot;: {
    &quot;markdown&quot;: &quot;./parsers/markdown&quot; 
  }
};</code></pre>
<h3>Publish</h3>
<p>You can use <code>punch publish</code> command to publish the generated site to a hosting facility you prefer. Publish to <a href="http://aws.typepad.com/aws/2011/02/host-your-static-website-on-amazon-s3.html">Amazon S3</a> is supported out of the box (a plugin API will be introduced for other publishing options).

</p>
<p>To publish directly to S3, add the following settings to <code>config.json</code>.

</p>
<pre><code>    &quot;publish&quot;       : {
        &quot;s3&quot;                     : {
            &quot;key&quot;       : &quot;&lt;api-key&gt;&quot;
        , &quot;secret&quot;    : &quot;&lt;secret-key&gt;&quot;
        , &quot;bucket&quot;    : &quot;&lt;bucket-name&gt;&quot;
        }    
    }</code></pre>
<p>Then from the root directory of your site, run <code>punch publish s3</code> (or <code>punch p</code> shortcut).


</p>
</div>
</div>


<footer role="contentinfo" class="clearfix">
<p>Built with <a href="http://laktek.github.com/punch">Punch</a>
</footer>

<!-- Scripts -->
<script src="js/libs/jquery-1.6.2.min.js"></script>
<script src="js/libs/mustache.js"></script>
<script src="js/libs/mustache_renderer.js"></script>
<script src="js/plugins.js"></script>
<script src="js/script.js"></script>
<script src="js/mylibs/helper.js"></script>

<!--[if (lt IE 9) & (!IEMobile)]>
<script src="js/libs/imgsizer.js"></script>
<![endif]-->

<script>
// iOS scale bug fix
MBP.scaleFix();
</script>

<!-- http://mths.be/aab -->
<script>
var _gaq=[['_setAccount','UA-337076-5'],['_trackPageview']];
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>
